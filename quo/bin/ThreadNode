#!/bin/sh

libdir=/home/jzinky/work/quo/lib
LD_LIBRARY_PATH=${LD_LIBRARY_PATH}:${libdir}
export LD_LIBRARY_PATH
# export DYLD_LIBRARY_PATH=${DYLD_LIBRARY_PATH}:${QUO_ROOT}/lib

count="-Dorg.cougaar.thread.running.max=${THREAD_MAX:-1}"
debug="-Dorg.cougaar.thread.debug=${DEBUG_THREADS:-false}"
scheduler="-Dorg.cougaar.thread.timeslice=${TIME_SLICE:-true}"

#Priority based on priorities in a file
aspects=" -Dorg.cougaar.message.transport.aspects=org.cougaar.core.mts.PrioritizedThreadsAspect,org.cougaar.core.mts.WasteCPUAspect  -Dorg.cougaar.lib.quo.priorities=${COUGAAR_INSTALL_PATH}/quo/bin/props/cougaar/performance-priorities.props"

#Uses JNI calls to get real CPU measurements
#The .so files are part of QuO
#aspects=" -Dorg.cougaar.message.transport.aspects=org.cougaar.lib.mquo.PercentageCPUThreadsAspect,org.cougaar.core.mts.WasteCPUAspect  -Dorg.cougaar.lib.quo.percentages=${COUGAAR_INSTALL_PATH}/quo/bin/props/cougaar/performance-percentages.props"


#aspects=" -Dorg.cougaar.message.transport.aspects=org.cougaar.core.mts.WasteCPUAspect"

#aspects=" -Dorg.cougaar.message.transport.aspects=org.cougaar.core.mts.WasteCPUAspect -Dorg.cougaar.message.transport.percentages=${COUGAAR_INSTALL_PATH}/quo/bin/props/cougaar/performance-percentages.props -Dorg.cougaar.message.transport.threadtest=true"

COUGAAR_JAVA_ARGS="$count $scheduler $debug $aspects"

export COUGAAR_JAVA_ARGS

exec ${COUGAAR_INSTALL_PATH}/core/bin/Node $*

